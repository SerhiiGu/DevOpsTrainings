–¢—É—Ç —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ server install procedure, modules and playbooks


               ====== –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è ======
apt update
apt install ansible -y


               ====== Playbooks ======
  Playbooks –º–æ–∂–Ω–∞ —Ä–æ–∑–º—ñ—â—É–≤–∞—Ç–∏ –≤ –¥–æ–≤—ñ–ª—å–Ω–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è—Ö. –ù-–¥, /home/serhii/ –∞–±–æ—â–æ.

 
               ====== üîß Best Practices –≤ Ansible ======
1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥—ñ–≤

project/
‚îú‚îÄ‚îÄ inventories/
‚îÇ   ‚îî‚îÄ‚îÄ production/
‚îÇ       ‚îú‚îÄ‚îÄ hosts
‚îÇ       ‚îî‚îÄ‚îÄ group_vars/
‚îú‚îÄ‚îÄ roles/
‚îÇ   ‚îî‚îÄ‚îÄ nginx/
‚îÇ       ‚îú‚îÄ‚îÄ tasks/
‚îÇ       ‚îú‚îÄ‚îÄ templates/
‚îÇ       ‚îú‚îÄ‚îÄ files/
‚îú‚îÄ‚îÄ playbooks/
‚îÇ   ‚îî‚îÄ‚îÄ site.yml
‚îî‚îÄ‚îÄ ansible.cfg

2. –Ü–Ω–≤–µ–Ω—Ç–∞—Ä—ñ–∑–∞—Ü—ñ—è
    –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —á—ñ—Ç–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —ñ–Ω–≤–µ–Ω—Ç–∞—Ä—ñ–≤ (hosts), —Ä–æ–∑–¥—ñ–ª—è–π —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞: dev, prod.
    –î–æ–±—Ä–µ –º–∞—Ç–∏ group_vars —ñ host_vars.
3. –ü–ª–µ–π–±—É–∫–∏
    –ù–∞–∑–≤–∏ –º–∞—é—Ç—å –±—É—Ç–∏ –∑—Ä–æ–∑—É–º—ñ–ª–∏–º–∏.
    –û–¥–∏–Ω –ø–ª–µ–π–±—É–∫ ‚Äî –æ–¥–Ω–∞ —Ü—ñ–ª—å.
    –†–æ–ª—ñ ‚Äî –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.
    –£–Ω–∏–∫–∞–π –¥—É–±–ª—é–≤–∞–Ω–Ω—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π vars, defaults, lookup.
4. Idempotency
    –ü–ª–µ–π–±—É–∫ –º–∞—î –±—É—Ç–∏ —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∏–º: –∫—ñ–ª—å–∫–∞ –∑–∞–ø—É—Å–∫—ñ–≤ ‚Äî —Ç–æ–π —Å–∞–º–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
5. Handlers
    –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π notify –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É —Å–ª—É–∂–± –ª–∏—à–µ –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö.
6. –ú–æ–¥—É–ª—ñ –∑–∞–º—ñ—Å—Ç—å shell/command
    –ù–∞–ø—Ä–∏–∫–ª–∞–¥, ansible.builtin.apt, ansible.builtin.copy –∑–∞–º—ñ—Å—Ç—å command: apt install ...


              ====== –ó–∞–ø—É—Å–∫ playbooks ======
ansible-playbook -i inventories/production/hosts playbooks/site.yml

    –î–ª—è --check (dry run): ansible-playbook --check ...
    –î–ª—è --diff (–ø–æ–∫–∞–∑–∞—Ç–∏ –∑–º—ñ–Ω–∏): ansible-playbook --diff ...
    –î–ª—è --limit: --limit "webservers" ‚Äî –∑–∞–ø—É—Å–∫ –ª–∏—à–µ –Ω–∞ –ø–µ–≤–Ω—ñ–π –≥—Ä—É–ø—ñ


