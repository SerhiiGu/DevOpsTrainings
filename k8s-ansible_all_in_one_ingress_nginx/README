–¢—É—Ç —Ä–æ–∑–≥–æ—Ä—Ç–∞—î–º–æ —Ç–∞ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ –ø—Ä–æ—Å—Ç–∏–π Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä.

====== –°—Ç—Ä—É–∫—Ç—É—Ä–∞ ======
    1 master node
    1 worker node
    Container Runtime: containerd
    CNI plugin: Flannel
    Kubernetes: –æ—Å—Ç–∞–Ω–Ω—è —Å—Ç–∞–±—ñ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è
    –û–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞: Debian 12


====== –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ ======
    1) –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è /etc/hosts . –ù–∞ –∫–æ–∂–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ –∫–ª–∞—Å—Ç–µ—Ä–∞ –±–∞–∂–∞–Ω–æ, —â–æ–± —Ä–µ–∑–æ–ª–≤–∏–ª–∏—Å—è –≤—Å—ñ —ñ–Ω—à—ñ –π–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∏.


====== –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ======
    1) –í–∏–∫–æ–Ω—É—î–º–æ –ø–ª–µ–π–±—É–∫, —á–∞—Å—Ç–∏–Ω—É –ø–µ—Ä—à—É:
ansible-playbook playbooks/95-part1.yml

    2) –í–∏–∫–æ–Ω—É—î–º–æ –Ω–∞ –æ–¥–Ω–æ–º—É –º–∞—Å—Ç–µ—Ä—ñ
kubeadm init --pod-network-cidr=10.244.0.0/16

    –æ—Ç—Ä–∏–º—É—î–º–æ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ä–æ–±–æ—á–∏—Ö —Å—Ç–∞–Ω—Ü—ñ–π(worker) –≤–∏–≥–ª—è–¥—É:
kubeadm join Master_IP:6443 --token KUBERNETES_TOKEN \
        --discovery-token-ca-cert-hash LONG_CA_CERT_STRING_HASH

    –ù–∏–º–∏ –ø—ñ–¥–∫–ª—é—á–∞—î–º–æ —ñ–Ω—à—ñ –º–∞—Å—Ç–µ—Ä–∏ —Ç–∞ –≤–æ—Ä–∫–µ—Ä–∏.

    –¢–∞–∫–æ–∂:
mkdir -p $HOME/.kube
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config

    –û–ø—ñ—Å–ª—è –Ω–∞ –º–∞—Å—Ç–µ—Ä—ñ –ø—ñ–¥–∫–ª—é—á–∞—î–º–æ –º–µ—Ä–µ–∂–µ–≤–∏–π –ø–ª–∞–≥—ñ–Ω:
kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml

    —ñ —á–µ—Ä–µ–∑ –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω –Ω–æ–¥–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ –º–∞—é—Ç—å –ø–µ—Ä–µ–π—Ç–∏ —É —Å—Ç–∞–Ω Ready:
root@k8s-master:~# kubectl get nodes
NAME           STATUS   ROLES           AGE     VERSION
k8s-master     Ready    control-plane   14m     v1.33.0
k8s-worker-1   Ready    <none>          8m30s   v1.33.0

    1) –í–∏–∫–æ–Ω—É—î–º–æ –ø–ª–µ–π–±—É–∫, —á–∞—Å—Ç–∏–Ω—É –¥—Ä—É–≥—É:
ansible-playbook playbooks/96-part2.yml


====== –ü—Ä–∏–º—ñ—Ç–∫–∏ ======
    1) –†–æ–±–æ—á—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –∫—Ä—É—Ç–∏—Ç–∏–º—É—Ç—å—Å—è –≤–∏–∫–ª—é—á–Ω–æ –Ω–∞ worker –Ω–æ–¥–∞—Ö –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.
       –î–ª—è –¥–æ–∑–≤–æ–ª—É —Ä–æ–±–∏—Ç–∏ —Ü–µ –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ, —Ç—Ä–µ–±–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏(–∞–ª–µ –¥—É–∂–µ –æ–±–µ—Ä–µ–∂–Ω–æ, —â–æ–± —ó—Ö –Ω–µ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏)
kubectl taint nodes k8s-master-3 node-role.kubernetes.io/control-plane- --overwrite





PS. https://habr.com/ru/articles/725640/



====== –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ ======
    –ö–æ–Ω—Ñ—ñ–≥ nginx —Ä–æ—É—Ç—ñ–≤:
kubectl describe ingress -n kubernetes-dashboard kubernetes-dashboard



=====================================================
–î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏
=====================================================
üî∏ Kubernetes Dashboard  ### playbooks/991-kubernetes_dashboard.yml
    ‚úî –í—ñ–∑—É–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥ –∫–ª–∞—Å—Ç–µ—Ä–∞.
    ‚úî –î–æ–±—Ä–µ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞–Ω—É –∫–ª–∞—Å—Ç–µ—Ä—É –∞–±–æ –Ω–∞–≤—á–∞–Ω–Ω—è.
    üîí –ü–æ—Ç—Ä—ñ–±–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É (RBAC, —Ç–æ–∫–µ–Ω–∏, TLS).

    –¢–æ–∫–µ–Ω –¥–ª—è –≤—Ö–æ–¥—É:
kubectl -n kubernetes-dashboard create token kubernetes-dashboard

==============================

